"use strict";(()=>{var e={};e.id=744,e.ids=[744],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9926:e=>{e.exports=import("zod")},9901:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>c,default:()=>l,routeModule:()=>p});var i=a(1802),n=a(7153),o=a(6249),s=a(1657),d=e([s]);s=(d.then?(await d)():d)[0];let l=(0,o.l)(s,"default"),c=(0,o.l)(s,"config"),p=new i.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/meetups",pathname:"/api/meetups",bundlePath:"",filename:""},userland:s});r()}catch(e){r(e)}})},9822:(e,t,a)=>{a.d(t,{Z:()=>o});let r=require("@prisma/client"),i=globalThis,n=i.prisma||new r.PrismaClient,o=n},1657:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>handler});var i=a(9822),n=a(9926),o=e([n]);n=(o.then?(await o)():o)[0];let s=n.z.object({title:n.z.string().min(1),description:n.z.string().optional(),time:n.z.string().optional(),capacity:n.z.number().int().positive().optional(),tags:n.z.array(n.z.string()).optional(),barId:n.z.string().optional(),organizerId:n.z.string().optional()});async function handler(e,t){if("GET"===e.method){let e=await i.Z.meetup.findMany({include:{bar:!0,rsvps:!0,organizer:!0}});t.status(200).json(e);return}if("POST"===e.method){let a=s.safeParse(e.body);if(!a.success)return t.status(400).json({error:a.error.flatten()});try{let e=a.data,r=await i.Z.meetup.create({data:{title:e.title,description:e.description||"",time:e.time?new Date(e.time):null,capacity:e.capacity??20,tags:e.tags||[],bar:e.barId?{connect:{id:e.barId}}:void 0,organizer:e.organizerId?{connect:{id:e.organizerId}}:void 0}});t.status(201).json(r)}catch(e){t.status(500).json({error:String(e)})}return}t.status(405).json({error:"method not allowed"})}r()}catch(e){r(e)}})}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[222],()=>__webpack_exec__(9901));module.exports=a})();