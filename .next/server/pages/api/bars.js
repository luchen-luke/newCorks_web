"use strict";(()=>{var e={};e.id=96,e.ids=[96],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9926:e=>{e.exports=import("zod")},8408:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{config:()=>u,default:()=>d,routeModule:()=>c});var n=t(1802),i=t(7153),s=t(6249),o=t(2802),l=e([o]);o=(l.then?(await l)():l)[0];let d=(0,s.l)(o,"default"),u=(0,s.l)(o,"config"),c=new n.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/bars",pathname:"/api/bars",bundlePath:"",filename:""},userland:o});r()}catch(e){r(e)}})},9822:(e,a,t)=>{t.d(a,{Z:()=>s});let r=require("@prisma/client"),n=globalThis,i=n.prisma||new r.PrismaClient,s=i},2802:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{default:()=>handler});var n=t(9822),i=t(9926),s=e([i]);i=(s.then?(await s)():s)[0];let o=i.z.object({name:i.z.string().min(1),area:i.z.string().optional(),vibe:i.z.string().optional(),avg:i.z.number().int().optional(),tags:i.z.array(i.z.string()).optional()});async function handler(e,a){if("GET"===e.method){let e=await n.Z.bar.findMany({include:{meetups:!0}});a.status(200).json(e);return}if("POST"===e.method){let t=o.safeParse(e.body);if(!t.success)return a.status(400).json({error:t.error.flatten()});try{let e=t.data,r=await n.Z.bar.create({data:{name:e.name,area:e.area||"",vibe:e.vibe||"",avg:e.avg??null,tags:e.tags||[]}});a.status(201).json(r);return}catch(e){a.status(500).json({error:String(e)})}}a.status(405).json({error:"method not allowed"})}r()}catch(e){r(e)}})}};var a=require("../../webpack-api-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[222],()=>__webpack_exec__(8408));module.exports=t})();