"use strict";(()=>{var e={};e.id=464,e.ids=[464],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9926:e=>{e.exports=import("zod")},8519:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>c,default:()=>d,routeModule:()=>u});var n=a(1802),i=a(7153),s=a(6249),o=a(6589),l=e([o]);o=(l.then?(await l)():l)[0];let d=(0,s.l)(o,"default"),c=(0,s.l)(o,"config"),u=new n.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/knowledge",pathname:"/api/knowledge",bundlePath:"",filename:""},userland:o});r()}catch(e){r(e)}})},9822:(e,t,a)=>{a.d(t,{Z:()=>s});let r=require("@prisma/client"),n=globalThis,i=n.prisma||new r.PrismaClient,s=i},6589:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>handler});var n=a(9822),i=a(9926),s=e([i]);i=(s.then?(await s)():s)[0];let o=i.z.object({title:i.z.string().min(1),excerpt:i.z.string().optional(),content:i.z.string().optional(),tags:i.z.array(i.z.string()).optional()});async function handler(e,t){if("GET"===e.method){let e=await n.Z.article.findMany({orderBy:{createdAt:"desc"}});t.status(200).json(e);return}if("POST"===e.method){let a=o.safeParse(e.body);if(!a.success)return t.status(400).json({error:a.error.flatten()});try{let e=a.data,r=await n.Z.article.create({data:{title:e.title,excerpt:e.excerpt||"",content:e.content||"",tags:e.tags||[]}});t.status(201).json(r);return}catch(e){t.status(500).json({error:String(e)})}}t.status(405).json({error:"method not allowed"})}r()}catch(e){r(e)}})}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[222],()=>__webpack_exec__(8519));module.exports=a})();